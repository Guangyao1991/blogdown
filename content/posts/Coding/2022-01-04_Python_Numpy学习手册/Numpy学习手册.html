---
title: "Numpy学习手册"
author: "Guangyao Zhao"
date: '2022-01-04T21:09:12-05:00'
image: code.jpg
categories: 
- Python
tags:
- Python
- Numpy
---



<div id="array-object" class="section level2">
<h2>Array object</h2>
<div id="calculation" class="section level3">
<h3>Calculation</h3>
<pre class="python"><code>import numpy as np

x = np.random.randint(100, size=(3, 5))
print(&#39;x = &#39;, x)</code></pre>
<pre><code>## x =  [[ 2 41 71 12 65]
##  [ 1 57 55 77 63]
##  [97 89  9  3 45]]</code></pre>
<pre class="python"><code>x_ptp = x.ptp(axis=0)  # ptp: peak to peak (maximum - minimum)
print(&#39;x_ptp = &#39;, x_ptp)</code></pre>
<pre><code>## x_ptp =  [96 48 62 74 20]</code></pre>
<pre class="python"><code>x_clip = x.clip(min=40, max=80)  # 小于 min 的使其为 min，max 同理
print(&#39;x_clip = &#39;, x_clip)</code></pre>
<pre><code>## x_clip =  [[40 41 71 40 65]
##  [40 57 55 77 63]
##  [80 80 40 40 45]]</code></pre>
<pre class="python"><code>y = np.random.randn(3, 5)
y_round = y.round(decimals=2)  # 保留两位小数
print(&#39;y_round = &#39;, y_round)</code></pre>
<pre><code>## y_round =  [[ 1.09  0.68  0.52  0.22 -0.45]
##  [-0.65  0.65 -1.5   1.18  0.04]
##  [ 1.   -0.86 -0.6  -1.66 -0.93]]</code></pre>
<pre class="python"><code>z = np.eye(3)
z_trace = z.trace() # 矩阵的迹
print(&#39;z_trace = &#39;, z_trace)</code></pre>
<pre><code>## z_trace =  3.0</code></pre>
<pre class="python"><code>a = np.arange(9).reshape((3, 3))
a_sum = a.sum(axis=0)  # 可以不指定 axis，此时为整体的 sum
print(&#39;a_sum = &#39;, a_sum)</code></pre>
<pre><code>## a_sum =  [ 9 12 15]</code></pre>
<pre class="python"><code>a_cumsum = a.cumsum(axis=0) # 连加
print(&#39;a_cumsum = &#39;, a_cumsum)</code></pre>
<pre><code>## a_cumsum =  [[ 0  1  2]
##  [ 3  5  7]
##  [ 9 12 15]]</code></pre>
<pre class="python"><code>a_min = a.min(axis=0) # 最小值
print(&#39;a_min = &#39;, a_min)</code></pre>
<pre><code>## a_min =  [0 1 2]</code></pre>
<pre class="python"><code>a_max = a.max(axis=0) # 最大值
print(&#39;a_max = &#39;, a_max)</code></pre>
<pre><code>## a_max =  [6 7 8]</code></pre>
<pre class="python"><code>a_argmax = a.argmax(axis=0) # 最大值索引
print(&#39;a_argmax = &#39;, a_argmax)</code></pre>
<pre><code>## a_argmax =  [2 2 2]</code></pre>
<pre class="python"><code>a_prod = a.prod(axis=0) # 乘法
print(&#39;a_prod = &#39;, a_prod)</code></pre>
<pre><code>## a_prod =  [ 0 28 80]</code></pre>
<pre class="python"><code>a_cumprod = a.cumprod(axis=0) # 连乘
print(&#39;a_cumprod = &#39;, a_cumprod)</code></pre>
<pre><code>## a_cumprod =  [[ 0  1  2]
##  [ 0  4 10]
##  [ 0 28 80]]</code></pre>
<pre class="python"><code>a_var = a.var(axis=0) # 方差
print(&#39;a_var = &#39;, a_var)</code></pre>
<pre><code>## a_var =  [6. 6. 6.]</code></pre>
<pre class="python"><code>a_std = a.std(axis=0) # 标准差
print(&#39;a_std = &#39;, a_std)</code></pre>
<pre><code>## a_std =  [2.44948974 2.44948974 2.44948974]</code></pre>
<pre class="python"><code>b = np.array([[1, 1], [1, 0]])
b_all = b.all(axis=0) # 判断是否全为 1
b_any = b.any(axis=0) # 判断是否有 1
print(&#39;b_all = &#39;, b_all)</code></pre>
<pre><code>## b_all =  [ True False]</code></pre>
<pre class="python"><code>print(&#39;b_any = &#39;, b_any)</code></pre>
<pre><code>## b_any =  [ True  True]</code></pre>
</div>
<div id="item-selection-and-manipulation" class="section level3">
<h3>Item selection and manipulation</h3>
<pre class="python"><code>import numpy as np

x = np.random.randint(10, size=(3, 5)) # ! 取元素
x_take = x.take([11, 12])  # 将原数组展开，取第 11，12 个元素
print(&#39;x = &#39;, x)</code></pre>
<pre><code>## x =  [[6 3 0 2 8]
##  [4 1 1 4 4]
##  [4 0 0 7 5]]</code></pre>
<pre class="python"><code>print(&#39;x_take = &#39;, x_take)</code></pre>
<pre><code>## x_take =  [0 0]</code></pre>
<pre class="python"><code>x_put = np.arange(9).reshape(3, 3) # ! 替换元素
x_put.put([0, 1], [11, 22]) # 将 0,1处的元素替换
print(&#39;x_put = &#39;, x_put)</code></pre>
<pre><code>## x_put =  [[11 22  2]
##  [ 3  4  5]
##  [ 6  7  8]]</code></pre>
<pre class="python"><code>x_put.put(7,3, mode=&#39;clip&#39;)  # mode: raise, wrap, clip。TODO:undone
print(&#39;x_put = &#39;, x_put)</code></pre>
<pre><code>## x_put =  [[11 22  2]
##  [ 3  4  5]
##  [ 6  3  8]]</code></pre>
<pre class="python"><code>x1 = np.array([[1, 2, 3], [4, 5, 6]]) # repeat 重复元素
x1_repeat = x1.repeat([1, 2], axis=0) # 在竖直方向上第一行重复一次，第二行重复两次
x2 = np.arange(3)
x2_repeat = x2.repeat(3) # 当数据是一维的时候
print(&#39;x1_repeat = &#39;, x1_repeat) </code></pre>
<pre><code>## x1_repeat =  [[1 2 3]
##  [4 5 6]
##  [4 5 6]]</code></pre>
<pre class="python"><code>print(&#39;x2_repeat = &#39;, x2_repeat) </code></pre>
<pre><code>## x2_repeat =  [0 0 0 1 1 1 2 2 2]</code></pre>
<pre class="python"><code>x_sort = np.array([[2, 3, 1], [9, 5, 6]]) # ! sort 排序，无返回
x_sort.sort(axis=1)  # 就地更改
print(&#39;x_sort = &#39;, x_sort)</code></pre>
<pre><code>## x_sort =  [[1 2 3]
##  [5 6 9]]</code></pre>
<pre class="python"><code>x = np.array([[1, 3, 9], [9, 1, 8], [6, 5, 4]]) # ! argsort 返回 index.
x_argsort = x.argsort(axis=0) # 返回正序时该元素的索引
print(&#39;x_argsort = &#39;, x_argsort)</code></pre>
<pre><code>## x_argsort =  [[0 1 2]
##  [2 0 1]
##  [1 2 0]]</code></pre>
<pre class="python"><code>x_partition = np.random.randint(100, size=(3, 10)) 
# partition 返回数组沿指定轴分区部分排序的索引数组。
# 索引数组中位置k的索引对应的元素不小于位置k之前索引对应的元素（k 之前的顺序无所谓），
# 不大于位置k之后索引对应的元素。就地修改。
print(&#39;x_partition = &#39;, x_partition)</code></pre>
<pre><code>## x_partition =  [[67 54 25 12 50 20 66 80 69 84]
##  [30 76 45 84 98 53 14 90 45 59]
##  [57 17 76 89 98 16 41 61 95 84]]</code></pre>
<pre class="python"><code>x_partition.partition(kth=[4, 7], axis=1)  # 第4,7 个位置的元素位于正确有序元素
print(&#39;x_partition = &#39;, x_partition)</code></pre>
<pre><code>## x_partition =  [[12 20 25 50 54 66 67 69 80 84]
##  [30 14 45 45 53 59 76 84 90 98]
##  [17 16 41 57 61 76 84 89 95 98]]</code></pre>
<pre class="python"><code>x = np.array([1, 3, 5, 7]) 
# searchsorted 给定升序数组以及待插入元素，返回保持序列有序的插入位置
x_searchsorted = x.searchsorted(4, side=&#39;left&#39;) # 返回的是 index
print(&#39;x_searchsorted = &#39;, x_searchsorted)  </code></pre>
<pre><code>## x_searchsorted =  2</code></pre>
<pre class="python"><code>x = np.array([[1, 0, 0], [4, 3, 0]]) # ! nonzero, 返回非零元素索引
x_nonzero = x.nonzero() # 返回的是两个数组，行数组和列数组
print(&#39;x_nonzero = &#39;, x_nonzero)</code></pre>
<pre><code>## x_nonzero =  (array([0, 1, 1]), array([0, 0, 1]))</code></pre>
<pre class="python"><code>x = np.array([[1, 2], [3, 4], [5, 6]]) # ! compress, 提取数组
x_compress1 = x.compress([False, True, True], axis=0)
x_compress2 = x.compress([1, 0, 0], axis=0)
x_compress3 = x.compress([1], axis=0)  # 条件个数也可以和原数组的某个维度长度不完全相等
print(&#39;x_compress1 = &#39;, x_compress1)</code></pre>
<pre><code>## x_compress1 =  [[3 4]
##  [5 6]]</code></pre>
<pre class="python"><code>print(&#39;x_compress2 = &#39;, x_compress2)</code></pre>
<pre><code>## x_compress2 =  [[1 2]]</code></pre>
<pre class="python"><code>print(&#39;x_compress3 = &#39;, x_compress3)</code></pre>
<pre><code>## x_compress3 =  [[1 2]]</code></pre>
<pre class="python"><code>x = np.array([[1, 2], [3, 4], [5, 6]]) # ! diagonal 取出斜对角线元素
x_diagonal = x.diagonal(offset=0)
print(&#39;x_diagonal = &#39;, x_diagonal)</code></pre>
<pre><code>## x_diagonal =  [1 4]</code></pre>
</div>
<div id="memory-layout" class="section level3">
<h3>Memory layout</h3>
<pre class="python"><code>import numpy as np
x = np.array([[1, 2, 3], [4, 5, 6]], np.int64)
shape = x.shape # 形状
ndim = x.ndim # 维度
size = x.size # 元素个数

print(&#39;shape =&#39;, shape)</code></pre>
<pre><code>## shape = (2, 3)</code></pre>
<pre class="python"><code>print(&#39;ndim =&#39;, ndim)</code></pre>
<pre><code>## ndim = 2</code></pre>
<pre class="python"><code>print(&#39;size =&#39;, size)</code></pre>
<pre><code>## size = 6</code></pre>
</div>
<div id="other-attributes" class="section level3">
<h3>Other attributes</h3>
<pre class="python"><code>import numpy as np
x = np.array([[1, 2, 3], [4, 5, 6]], np.int64)
transpose = x.T  # 转置
flat = x.flat  # 将矩阵展开
print(&#39;transpose =&#39;, transpose)</code></pre>
<pre><code>## transpose = [[1 4]
##  [2 5]
##  [3 6]]</code></pre>
<pre class="python"><code>print(&#39;flat =&#39;, list(flat))</code></pre>
<pre><code>## flat = [1, 2, 3, 4, 5, 6]</code></pre>
</div>
<div id="shape-manipulation" class="section level3">
<h3>Shape manipulation</h3>
<pre class="python"><code>import numpy as np

x = np.arange(15) # 更改 shape
x.shape = (3, 5)
print(&#39;x.shape=&#39;, x.shape)</code></pre>
<pre><code>## x.shape= (3, 5)</code></pre>
<pre class="python"><code>x = np.arange(15) # reshape: 创建副本
x_reshape = x.reshape((5, 3))
print(&#39;x_reshape.shape=&#39;, x_reshape.shape)</code></pre>
<pre><code>## x_reshape.shape= (5, 3)</code></pre>
<pre class="python"><code>x = np.arange(15) # resize: 不创建副本
x.resize((3, 5))
print(&#39;x.resize=&#39;, x.shape)</code></pre>
<pre><code>## x.resize= (3, 5)</code></pre>
<pre class="python"><code>x = np.arange(15).reshape((3,5)) # transpose: 不创建副本
x_transpose = x.transpose()
print(&#39;x_transpose.shape=&#39;, x_transpose.shape)</code></pre>
<pre><code>## x_transpose.shape= (5, 3)</code></pre>
<pre class="python"><code>x = np.arange(15).reshape((3, 5)) # swapaxes: 不创建副本
x_swapaxes = x.swapaxes(0, 1) # 交换0，1轴，前后两个的位置没有关系。
print(&#39;x_swapaxes=&#39;, x_swapaxes)</code></pre>
<pre><code>## x_swapaxes= [[ 0  5 10]
##  [ 1  6 11]
##  [ 2  7 12]
##  [ 3  8 13]
##  [ 4  9 14]]</code></pre>
<pre class="python"><code>x = np.arange(15).reshape((3, 5)) # flatten: 创建副本
x_flatten = x.flatten()
print(&#39;x_flatten=&#39;, x_flatten)</code></pre>
<pre><code>## x_flatten= [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14]</code></pre>
<pre class="python"><code>x = np.arange(15).reshape((3, 5)) # ravel: 不创建副本
x_ravel = x.ravel()
print(&#39;x_ravel.shape=&#39;, x_ravel.shape) # (15,)</code></pre>
<pre><code>## x_ravel.shape= (15,)</code></pre>
<pre class="python"><code>x_1 = np.array([[1, 2, 3]]) # squeeze: 不创建副本
x_2 = np.array([[1],[2],[3]])
x1_squeeze = x_1.squeeze()
x2_squeeze = x_2.squeeze()
print(&#39;x_1.shape=&#39;, x_1.shape)</code></pre>
<pre><code>## x_1.shape= (1, 3)</code></pre>
<pre class="python"><code>print(&#39;x_2.shape=&#39;, x_2.shape)</code></pre>
<pre><code>## x_2.shape= (3, 1)</code></pre>
<pre class="python"><code>print(&#39;x1_squeeze =&#39;, x1_squeeze)</code></pre>
<pre><code>## x1_squeeze = [1 2 3]</code></pre>
<pre class="python"><code>print(&#39;x2_squeeze =&#39;, x2_squeeze)</code></pre>
<pre><code>## x2_squeeze = [1 2 3]</code></pre>
<pre class="python"><code>print(&#39;x_1_squeeze.shape=&#39;, x1_squeeze.shape)</code></pre>
<pre><code>## x_1_squeeze.shape= (3,)</code></pre>
<pre class="python"><code>print(&#39;x_2_squeeze.shape=&#39;, x2_squeeze.shape)</code></pre>
<pre><code>## x_2_squeeze.shape= (3,)</code></pre>
</div>
</div>
<div id="constants" class="section level1">
<h1>Constants</h1>
<pre class="python"><code>import numpy as np

np_inf = np.inf # ! inf: Inf, Infinity, PINF, infty
print(&#39;np_inf = &#39;, np_inf)</code></pre>
<pre><code>## np_inf =  inf</code></pre>
<pre class="python"><code>np_NINF = np.NINF # ! NINF: negative infinity
print(&#39;np_NINF = &#39;, np_NINF)</code></pre>
<pre><code>## np_NINF =  -inf</code></pre>
<pre class="python"><code>np_PINF = np.PINF # !PINF: positive infinity
print(&#39;np_PINF = &#39;, np_PINF)</code></pre>
<pre><code>## np_PINF =  inf</code></pre>
<pre class="python"><code>np_nan = np.nan # ! nan: NAN, NaN. not a number
print(&#39;np_nan = &#39;, np_nan)</code></pre>
<pre><code>## np_nan =  nan</code></pre>
<pre class="python"><code>np_NZERO = np.NZERO # ! NZERO: negative zero
print(&#39;np_NZERO = &#39;, np_NZERO) # np_PZERO =  -0.0</code></pre>
<pre><code>## np_NZERO =  -0.0</code></pre>
<pre class="python"><code>np_PZERO = np.PZERO # ! PZERO: positive zero
print(&#39;np_PZERO = &#39;, np_PZERO) # np_PZERO =  0.0</code></pre>
<pre><code>## np_PZERO =  0.0</code></pre>
<pre class="python"><code>np_e = np.e # ! e: euler constant
print(&#39;np_e = &#39;, np_e)</code></pre>
<pre><code>## np_e =  2.718281828459045</code></pre>
<pre class="python"><code>np_euler_gamma = np.euler_gamma # ! euler_gamma
print(&#39;np_euler_gamma = &#39;, np_euler_gamma)</code></pre>
<pre><code>## np_euler_gamma =  0.5772156649015329</code></pre>
<pre class="python"><code>np_pi = np.pi # ! pi
print(&#39;np_pi = &#39;, np_pi)</code></pre>
<pre><code>## np_pi =  3.141592653589793</code></pre>
<div id="universal-functions-ufunc" class="section level2">
<h2>Universal functions (ufunc)</h2>
</div>
<div id="availible-ufuncs" class="section level2">
<h2>Availible ufuncs</h2>
<pre class="python"><code>import numpy as np

x = np.random.randint(10, size = (3, 5))
y = np.random.randint(10, size = (3, 5))

x_add = np.add(x, y) # 矩阵相加
print(&#39;x_add = &#39;, x_add)</code></pre>
<pre><code>## x_add =  [[ 5 13  4  8  7]
##  [ 5  9  9 10  9]
##  [ 4 14 10 11  8]]</code></pre>
<pre class="python"><code>x_sub = np.subtract(x, y) # 矩阵相减
print(&#39;x_sub = &#39;, x_sub)</code></pre>
<pre><code>## x_sub =  [[-1 -5  4  8 -7]
##  [ 1 -1 -7  4 -9]
##  [ 0  0 -2  3  6]]</code></pre>
<pre class="python"><code>x_mul = np.multiply(x, y) # 对应相乘
print(&#39;x_mul = &#39;, x_mul)</code></pre>
<pre><code>## x_mul =  [[ 6 36  0  0  0]
##  [ 6 20  8 21  0]
##  [ 4 49 24 28  7]]</code></pre>
<pre class="python"><code>x_div = np.divide(x, y) # 对应相除</code></pre>
<pre><code>## &lt;string&gt;:1: RuntimeWarning: divide by zero encountered in true_divide</code></pre>
<pre class="python"><code>print(&#39;x_div = &#39;, x_div)</code></pre>
<pre><code>## x_div =  [[0.66666667 0.44444444        inf        inf 0.        ]
##  [1.5        0.8        0.125      2.33333333 0.        ]
##  [1.         1.         0.66666667 1.75       7.        ]]</code></pre>
<pre class="python"><code>x_abs = np.absolute(x) # 绝对值
print(&#39;x_abs = &#39;, x_abs)</code></pre>
<pre><code>## x_abs =  [[2 4 4 8 0]
##  [3 4 1 7 0]
##  [2 7 4 7 7]]</code></pre>
<pre class="python"><code>x_sign = np.sign(x) # 符号函数
print(&#39;x_sign = &#39;, x_sign)</code></pre>
<pre><code>## x_sign =  [[1 1 1 1 0]
##  [1 1 1 1 0]
##  [1 1 1 1 1]]</code></pre>
<pre class="python"><code>x_exp = np.exp(x) # 指数函数
print(&#39;x_exp = &#39;, x_exp)</code></pre>
<pre><code>## x_exp =  [[7.38905610e+00 5.45981500e+01 5.45981500e+01 2.98095799e+03
##   1.00000000e+00]
##  [2.00855369e+01 5.45981500e+01 2.71828183e+00 1.09663316e+03
##   1.00000000e+00]
##  [7.38905610e+00 1.09663316e+03 5.45981500e+01 1.09663316e+03
##   1.09663316e+03]]</code></pre>
<pre class="python"><code>x_log = np.log(x)  # 底数为 e</code></pre>
<pre><code>## &lt;string&gt;:1: RuntimeWarning: divide by zero encountered in log</code></pre>
<pre class="python"><code>print(&#39;x_log = &#39;, x_log)</code></pre>
<pre><code>## x_log =  [[0.69314718 1.38629436 1.38629436 2.07944154       -inf]
##  [1.09861229 1.38629436 0.         1.94591015       -inf]
##  [0.69314718 1.94591015 1.38629436 1.94591015 1.94591015]]</code></pre>
<pre class="python"><code>x_log2 = np.log2(x) # 底数为 2</code></pre>
<pre><code>## &lt;string&gt;:1: RuntimeWarning: divide by zero encountered in log2</code></pre>
<pre class="python"><code>print(&#39;x_log2 = &#39;, x_log2)</code></pre>
<pre><code>## x_log2 =  [[1.         2.         2.         3.               -inf]
##  [1.5849625  2.         0.         2.80735492       -inf]
##  [1.         2.80735492 2.         2.80735492 2.80735492]]</code></pre>
<pre class="python"><code>x_log10 = np.log10(x) # 底数为 10</code></pre>
<pre><code>## &lt;string&gt;:1: RuntimeWarning: divide by zero encountered in log10</code></pre>
<pre class="python"><code>print(&#39;x_log10 = &#39;, x_log10)</code></pre>
<pre><code>## x_log10 =  [[0.30103    0.60205999 0.60205999 0.90308999       -inf]
##  [0.47712125 0.60205999 0.         0.84509804       -inf]
##  [0.30103    0.84509804 0.60205999 0.84509804 0.84509804]]</code></pre>
<pre class="python"><code>x_sqrt = np.sqrt(x) # 开方
print(&#39;x_sqrt = &#39;, x_sqrt)</code></pre>
<pre><code>## x_sqrt =  [[1.41421356 2.         2.         2.82842712 0.        ]
##  [1.73205081 2.         1.         2.64575131 0.        ]
##  [1.41421356 2.64575131 2.         2.64575131 2.64575131]]</code></pre>
<pre class="python"><code>x_square = np.square(x) # 二次方
print(&#39;x_square = &#39;, x_square)</code></pre>
<pre><code>## x_square =  [[ 4 16 16 64  0]
##  [ 9 16  1 49  0]
##  [ 4 49 16 49 49]]</code></pre>
<pre class="python"><code>x_mat = np.matmul(x, y.T) # ! 矩阵相乘
print(&#39;x_mat = &#39;, x_mat)</code></pre>
<pre><code>## x_mat =  [[ 42  80  88]
##  [ 45  55  68]
##  [118 155 112]]</code></pre>
<pre class="python"><code>x = np.array([30, 45, 60, 90]) # ! 三角函数
x_sin = np.sin(x)
x_cos = np.cos(x)
x_tan = np.tan(x)

print(&#39;x_sin = &#39;, x_sin)</code></pre>
<pre><code>## x_sin =  [-0.98803162  0.85090352 -0.30481062  0.89399666]</code></pre>
<pre class="python"><code>print(&#39;x_cos = &#39;, x_cos)</code></pre>
<pre><code>## x_cos =  [ 0.15425145  0.52532199 -0.95241298 -0.44807362]</code></pre>
<pre class="python"><code>print(&#39;x_tan = &#39;, x_tan)</code></pre>
<pre><code>## x_tan =  [-6.4053312   1.61977519  0.32004039 -1.99520041]</code></pre>
<div id="broadcasting" class="section level3">
<h3>Broadcasting</h3>
<ol style="list-style-type: decimal">
<li>If <code>a.shape</code> is <code>(5,1)</code>, <code>b.shape</code> is<code>(1,6)</code>, <code>c.shape</code> is <code>(6,)</code> and <code>d.shape</code> is <code>()</code> so that <em>d</em> is a scalar, then <em>a</em>, <em>b</em>, <em>c</em>, and <em>d</em> are all broadcastable to dimension <code>(5,6)</code>.</li>
<li><strong>a</strong>: acts like a <code>(5,6)</code> array where <code>a[:,0]</code> is broadcast to the other columns.</li>
<li><strong>b</strong>: acts like a <code>(5,6)</code> array where <code>b[0,:]</code> is broadcast to the other rows.</li>
<li><strong>c</strong>: acts like a <code>(1,6)</code> array and therefore like a <code>(5,6)</code> array where <code>c[:]</code> is broadcast to every row, and finally.</li>
<li><strong>d</strong>: acts like a <code>(5,6)</code> array where the single value is repeated.</li>
</ol>
<pre class="python"><code>import numpy as np

x = np.arange(15).reshape((3, 5))
x1 = np.array([2, 2, 2, 2, 2])  # 请注意这种情况(5,)
x2 = np.array([[3], [3], [3]])
x3 = np.array([[2, 2, 2, 2, 2]])
x4 = 10

print(&#39;x1.shape = &#39;, x1.shape)</code></pre>
<pre><code>## x1.shape =  (5,)</code></pre>
<pre class="python"><code>x1 = x1 * x
print(&#39;x1.shape = &#39;, x1.shape)</code></pre>
<pre><code>## x1.shape =  (3, 5)</code></pre>
<pre class="python"><code>print(&#39;x2.shape = &#39;, x2.shape)</code></pre>
<pre><code>## x2.shape =  (3, 1)</code></pre>
<pre class="python"><code>x2 = x2 * x
print(&#39;x2.shape = &#39;, x2.shape)</code></pre>
<pre><code>## x2.shape =  (3, 5)</code></pre>
<pre class="python"><code>print(&#39;x3.shape = &#39;, x3.shape)</code></pre>
<pre><code>## x3.shape =  (1, 5)</code></pre>
<pre class="python"><code>x3 = x3 * x
print(&#39;x3.shape = &#39;, x3.shape)</code></pre>
<pre><code>## x3.shape =  (3, 5)</code></pre>
<pre class="python"><code>x4 = x4 * x  # 全部扩大 10 倍
print(&#39;x4.shape = &#39;, x4.shape)</code></pre>
<pre><code>## x4.shape =  (3, 5)</code></pre>
</div>
</div>
<div id="routines" class="section level2">
<h2>Routines</h2>
<div id="array-manipulation-routines" class="section level3">
<h3>Array manipulation routines</h3>
<div id="adding-and-removing-elements" class="section level4">
<h4>Adding and removing elements</h4>
<pre class="python"><code>import numpy as np

x = np.arange(15).reshape((3, 5))

x_delete = np.delete(x, obj=[0, 1], axis=1) # 会创建副本，不直接在原矩阵上修改
print(&#39;x_delete = &#39;, x_delete)</code></pre>
<pre><code>## x_delete =  [[ 2  3  4]
##  [ 7  8  9]
##  [12 13 14]]</code></pre>
<pre class="python"><code>x_insert = np.insert(x, values=3, obj=[0, 0], axis=1) # 插入元素
print(&#39;x_insert = &#39;, x_insert)</code></pre>
<pre><code>## x_insert =  [[ 3  3  0  1  2  3  4]
##  [ 3  3  5  6  7  8  9]
##  [ 3  3 10 11 12 13 14]]</code></pre>
<pre class="python"><code>x_insert = np.insert(x, values=[[2], [4], [2]], obj=[0], axis=1)
print(&#39;x_insert = &#39;, x_insert)</code></pre>
<pre><code>## x_insert =  [[ 2  0  1  2  3  4]
##  [ 4  5  6  7  8  9]
##  [ 2 10 11 12 13 14]]</code></pre>
<pre class="python"><code>x = np.array([0, 1, 1, 2, 1, 0]) 
# return_index: 返回留下的元素 index; 
# return_inverse:返回原矩阵中的翻转 ;
# return_counts: 返回原矩阵中元素出现的次数
x_unique = np.unique(x,
                     return_index=True,
                     # return_inverse=True,
                     return_counts=True,
                     axis=None)
print(&#39;x_unique = &#39;, x_unique)</code></pre>
<pre><code>## x_unique =  (array([0, 1, 2]), array([0, 1, 3]), array([2, 3, 1]))</code></pre>
<pre class="python"><code>x1 = np.array([[1, 2, 3], [1, 2, 3], [1, 2, 4]])
x2 = np.array([[1, 1, 1], [2, 2, 2], [3, 3, 1]])
x1_unique = np.unique(x1, axis=0)  
x2_unique = np.unique(x2, axis=1)  
print(&#39;x1_unique = &#39;, x1_unique)</code></pre>
<pre><code>## x1_unique =  [[1 2 3]
##  [1 2 4]]</code></pre>
<pre class="python"><code>print(&#39;x2_unique = &#39;, x2_unique)</code></pre>
<pre><code>## x2_unique =  [[1 1]
##  [2 2]
##  [1 3]]</code></pre>
<pre class="python"><code>x = np.array([0, 0, 0, 1, 1, 0, 1, 0]) # ! trim_zeros，只能修剪一维数组
x_trim_zeros = np.trim_zeros(x, trim=&#39;fb&#39;)  # f:front; b:back;默认为 fb
print(&#39;x_trim_zeros = &#39;, x_trim_zeros)</code></pre>
<pre><code>## x_trim_zeros =  [1 1 0 1]</code></pre>
</div>
<div id="array-creation-routines" class="section level4">
<h4>Array creation routines</h4>
<pre class="python"><code>import numpy as np

x_empty = np.empty(shape=(3, 5)) # ! from shape or value
print(&#39;x_empty = &#39;, x_empty)</code></pre>
<pre><code>## x_empty =  [[0.00e+000 1.48e-323 2.96e-323 4.45e-323 5.93e-323]
##  [7.41e-323 8.89e-323 1.04e-322 1.19e-322 1.33e-322]
##  [1.48e-322 1.63e-322 1.78e-322 1.93e-322 2.08e-322]]</code></pre>
<pre class="python"><code>x_ones = np.ones(shape=(3, 5), dtype=np.int64)
print(&#39;x_ones = &#39;, x_ones)</code></pre>
<pre><code>## x_ones =  [[1 1 1 1 1]
##  [1 1 1 1 1]
##  [1 1 1 1 1]]</code></pre>
<pre class="python"><code>x_zeros = np.zeros(shape=(3, 5), dtype=np.int64)
print(&#39;x_zeros = &#39;, x_zeros)</code></pre>
<pre><code>## x_zeros =  [[0 0 0 0 0]
##  [0 0 0 0 0]
##  [0 0 0 0 0]]</code></pre>
<pre class="python"><code>x_full = np.full(shape=(3, 5), fill_value=3)
print(&#39;x_full = &#39;, x_full)</code></pre>
<pre><code>## x_full =  [[3 3 3 3 3]
##  [3 3 3 3 3]
##  [3 3 3 3 3]]</code></pre>
<pre class="python"><code>x_empty_like = np.empty_like(x_empty)
print(&#39;x_empty_like = &#39;, x_empty_like)</code></pre>
<pre><code>## x_empty_like =  [[ 0.00000000e+000  1.18575755e-322 -0.00000000e+000  0.00000000e+000
##    2.12199579e-314]
##  [ 0.00000000e+000  0.00000000e+000  0.00000000e+000  1.77229088e-310
##    3.50977866e+064]
##  [ 0.00000000e+000  0.00000000e+000              nan              nan
##    3.50977942e+064]]</code></pre>
<pre class="python"><code>x_ones_like = np.ones_like(x_ones)
print(&#39;x_ones_like = &#39;, x_ones_like)</code></pre>
<pre><code>## x_ones_like =  [[1 1 1 1 1]
##  [1 1 1 1 1]
##  [1 1 1 1 1]]</code></pre>
<pre class="python"><code>x_zeros_like = np.zeros_like(x_zeros)
print(&#39;x_zeros_like = &#39;, x_zeros_like)</code></pre>
<pre><code>## x_zeros_like =  [[0 0 0 0 0]
##  [0 0 0 0 0]
##  [0 0 0 0 0]]</code></pre>
<pre class="python"><code>x_full_like = np.full_like(x_full, fill_value=10)
print(&#39;x_full_like = &#39;, x_full_like)</code></pre>
<pre><code>## x_full_like =  [[10 10 10 10 10]
##  [10 10 10 10 10]
##  [10 10 10 10 10]]</code></pre>
<pre class="python"><code>x_eye = np.eye(N=5, M=4, k=1)  # N 行 M 列 k 偏移
print(&#39;x_eye = &#39;, x_eye)</code></pre>
<pre><code>## x_eye =  [[0. 1. 0. 0.]
##  [0. 0. 1. 0.]
##  [0. 0. 0. 1.]
##  [0. 0. 0. 0.]
##  [0. 0. 0. 0.]]</code></pre>
<pre class="python"><code>x_identity = np.identity(n=5)  # 只能创建方阵
print(&#39;x_identity = &#39;, x_identity)</code></pre>
<pre><code>## x_identity =  [[1. 0. 0. 0. 0.]
##  [0. 1. 0. 0. 0.]
##  [0. 0. 1. 0. 0.]
##  [0. 0. 0. 1. 0.]
##  [0. 0. 0. 0. 1.]]</code></pre>
<pre class="python"><code>li = np.arange(15).reshape(3, 5) # ! from existing data
x_arr = np.array(li)  # 数据源是 ndarray 的时候， 会copy 出副本。list 时不 copy
print(&#39;x_arr = &#39;, x_arr)</code></pre>
<pre><code>## x_arr =  [[ 0  1  2  3  4]
##  [ 5  6  7  8  9]
##  [10 11 12 13 14]]</code></pre>
<pre class="python"><code>x_asarr = np.asarray(li)  # 不 copy 出副本
print(&#39;x_asarr = &#39;, x_asarr)</code></pre>
<pre><code>## x_asarr =  [[ 0  1  2  3  4]
##  [ 5  6  7  8  9]
##  [10 11 12 13 14]]</code></pre>
<pre class="python"><code>x_arange = np.arange(start=0, stop=15, step=1)  # ! numeric ranges
print(&#39;x_arange = &#39;, x_arange)</code></pre>
<pre><code>## x_arange =  [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14]</code></pre>
<pre class="python"><code>x_linspace = np.linspace(start=0,
                         stop=10,
                         num=11,
                         endpoint=True,
                         dtype=np.int64)
print(&#39;x_linspace = &#39;, x_linspace)</code></pre>
<pre><code>## x_linspace =  [ 0  1  2  3  4  5  6  7  8  9 10]</code></pre>
<pre class="python"><code>x_logspace = np.logspace(start=5, stop=10, num=10, base=2,
                         dtype=np.int64)  # base 的 start 次方到 stop 次方
print(&#39;x_logspace = &#39;, x_logspace)</code></pre>
<pre><code>## x_logspace =  [  32   47   69  101  149  219  322  474  696 1024]</code></pre>
<pre class="python"><code>x_geomspace = np.geomspace(start=1, # 对该序列取对数后，构成等差数列。TODO:undone
                           stop=10000,
                           endpoint=True,
                           num=5,
                           dtype=np.int64)
print(&#39;x_geomspace = &#39;, x_geomspace)</code></pre>
<pre><code>## x_geomspace =  [    1    10   100  1000 10000]</code></pre>
<pre class="python"><code>X = np.linspace(1, 10, 10)  
Y = np.linspace(2, 6, 5)  
x_mesh, y_mesh = np.meshgrid(X, Y) # 注意：X，Y 的位置会影响最终形状
print(&#39;x_mesh = &#39;, x_mesh)</code></pre>
<pre><code>## x_mesh =  [[ 1.  2.  3.  4.  5.  6.  7.  8.  9. 10.]
##  [ 1.  2.  3.  4.  5.  6.  7.  8.  9. 10.]
##  [ 1.  2.  3.  4.  5.  6.  7.  8.  9. 10.]
##  [ 1.  2.  3.  4.  5.  6.  7.  8.  9. 10.]
##  [ 1.  2.  3.  4.  5.  6.  7.  8.  9. 10.]]</code></pre>
<pre class="python"><code>print(&#39;y_mesh = &#39;, y_mesh)</code></pre>
<pre><code>## y_mesh =  [[2. 2. 2. 2. 2. 2. 2. 2. 2. 2.]
##  [3. 3. 3. 3. 3. 3. 3. 3. 3. 3.]
##  [4. 4. 4. 4. 4. 4. 4. 4. 4. 4.]
##  [5. 5. 5. 5. 5. 5. 5. 5. 5. 5.]
##  [6. 6. 6. 6. 6. 6. 6. 6. 6. 6.]]</code></pre>
<pre class="python"><code>x = np.arange(6).reshape((2, 3)) # ! building matrices
x_diag = np.diag(v=x, k=0)  # 将 x 的对角线提取出来，偏移为 k
print(&#39;x_diag = &#39;, x_diag)</code></pre>
<pre><code>## x_diag =  [0 4]</code></pre>
<pre class="python"><code>x_diagflat = np.diagflat(x, k=0)  # 将 x 所有元素展开，然后设置为对角线元素
print(&#39;diagflat = &#39;, x_diagflat)</code></pre>
<pre><code>## diagflat =  [[0 0 0 0 0 0]
##  [0 1 0 0 0 0]
##  [0 0 2 0 0 0]
##  [0 0 0 3 0 0]
##  [0 0 0 0 4 0]
##  [0 0 0 0 0 5]]</code></pre>
</div>
<div id="changing-array-shape" class="section level4">
<h4>Changing array shape</h4>
<pre class="python"><code>import numpy as np

x = np.arange(15)
x_reshape = np.reshape(a=x, newshape=(3, 5))  # 返回原始数组的视图
print(&#39;x_reshape = &#39;, x_reshape)</code></pre>
<pre><code>## x_reshape =  [[ 0  1  2  3  4]
##  [ 5  6  7  8  9]
##  [10 11 12 13 14]]</code></pre>
<pre class="python"><code>x = np.arange(15).reshape((3, 5))
x_ravel = np.ravel(x)  
print(&#39;x_ravel = &#39;, x_ravel)</code></pre>
<pre><code>## x_ravel =  [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14]</code></pre>
<pre class="python"><code>x_flat = x.flatten()  # 返回副本
print(&#39;x_flat = &#39;, x_flat)</code></pre>
<pre><code>## x_flat =  [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14]</code></pre>
</div>
<div id="changing-number-of-dimensions" class="section level4">
<h4>Changing number of dimensions</h4>
<pre class="python"><code>import numpy as np

x = np.array([[1, 2, 3]])
x_squeeze = np.squeeze(x)  # 将无用的维度去除。(1,3) -&gt; (3,)，返回的是 view
print(&#39;x_squeeze = &#39;, x_squeeze)</code></pre>
<pre><code>## x_squeeze =  [1 2 3]</code></pre>
<pre class="python"><code>x = np.array([1, 2, 3])
x_expand_dims = np.expand_dims(x, axis=(0, 1))  # 将增加的维度放在 0,1 处
print(&#39;x_expand_dims.shape&#39;, x_expand_dims.shape)</code></pre>
<pre><code>## x_expand_dims.shape (1, 1, 3)</code></pre>
</div>
<div id="joining-array" class="section level4">
<h4>Joining array</h4>
<pre class="python"><code>import numpy as np

x = np.arange(24).reshape((4, 6))
x1, x2 = np.split(x, indices_or_sections=2, axis=1) # 将矩阵分割

x_concatenate = np.concatenate((x1, x2, x2), axis=0)  # 可同时在纵轴合并两次以上的数组
print(&#39;x_concatenate.shape = &#39;, x_concatenate.shape)</code></pre>
<pre><code>## x_concatenate.shape =  (12, 3)</code></pre>
<pre class="python"><code>a = np.arange(0, 9).reshape((3, 3)) # ! block
b = np.arange(3)
b1 = np.expand_dims(b, axis=0)  # [[1,2,3]]
b2 = np.expand_dims(b, axis=1)  # [[1],[2],[3]]

block1 = np.block([[a], [b1]])  # 按行
block2 = np.block([a, b2])  # 按列
print(&#39;block1 = &#39;, block1)</code></pre>
<pre><code>## block1 =  [[0 1 2]
##  [3 4 5]
##  [6 7 8]
##  [0 1 2]]</code></pre>
<pre class="python"><code>print(&#39;block2 = &#39;, block2)</code></pre>
<pre><code>## block2 =  [[0 1 2 0]
##  [3 4 5 1]
##  [6 7 8 2]]</code></pre>
<pre class="python"><code>a = np.eye(2)
b = np.eye(3)
c = np.block([[a, np.zeros((2, 3))], [np.zeros((3, 2)), b]])  # 一个比较有意思的玩法
print(&#39;c = &#39;, c)</code></pre>
<pre><code>## c =  [[1. 0. 0. 0. 0.]
##  [0. 1. 0. 0. 0.]
##  [0. 0. 1. 0. 0.]
##  [0. 0. 0. 1. 0.]
##  [0. 0. 0. 0. 1.]]</code></pre>
<pre class="python"><code>x_vstack = np.vstack((x1, x2, x2)) # ! vstack
print(&#39;x_vstack = &#39;, x_vstack)</code></pre>
<pre><code>## x_vstack =  [[ 0  1  2]
##  [ 6  7  8]
##  [12 13 14]
##  [18 19 20]
##  [ 3  4  5]
##  [ 9 10 11]
##  [15 16 17]
##  [21 22 23]
##  [ 3  4  5]
##  [ 9 10 11]
##  [15 16 17]
##  [21 22 23]]</code></pre>
<pre class="python"><code>x_hstack = np.hstack((x1, x2, x2)) # ! hstack
print(&#39;x_hstack = &#39;, x_hstack)</code></pre>
<pre><code>## x_hstack =  [[ 0  1  2  3  4  5  3  4  5]
##  [ 6  7  8  9 10 11  9 10 11]
##  [12 13 14 15 16 17 15 16 17]
##  [18 19 20 21 22 23 21 22 23]]</code></pre>
</div>
<div id="rearranging-elements" class="section level4">
<h4>Rearranging elements</h4>
<pre class="python"><code>import numpy as np

x = np.arange(15).reshape((3, 5))

x_flip = np.flip(x, axis=1) # ! flip
print(&#39;x_flip = &#39;, x_flip)</code></pre>
<pre><code>## x_flip =  [[ 4  3  2  1  0]
##  [ 9  8  7  6  5]
##  [14 13 12 11 10]]</code></pre>
<pre class="python"><code>x_fliplr = np.fliplr(x) # ! fliplr
print(&#39;x_fliplr = &#39;, x_fliplr)</code></pre>
<pre><code>## x_fliplr =  [[ 4  3  2  1  0]
##  [ 9  8  7  6  5]
##  [14 13 12 11 10]]</code></pre>
<pre class="python"><code>x_flipud = np.flipud(x) # ! flipud
print(&#39;x_flipud = &#39;, x_flipud)</code></pre>
<pre><code>## x_flipud =  [[10 11 12 13 14]
##  [ 5  6  7  8  9]
##  [ 0  1  2  3  4]]</code></pre>
<pre class="python"><code>x_roll = np.roll(x, shift=2, axis=1) # ! roll
print(&#39;x_roll = &#39;, x_roll)</code></pre>
<pre><code>## x_roll =  [[ 3  4  0  1  2]
##  [ 8  9  5  6  7]
##  [13 14 10 11 12]]</code></pre>
<pre class="python"><code>x_rot = np.rot90(x, k=2) # k&gt;0: 逆时针；k&lt;0: 顺时针
print(&#39;x_rot = &#39;, x_rot)</code></pre>
<pre><code>## x_rot =  [[14 13 12 11 10]
##  [ 9  8  7  6  5]
##  [ 4  3  2  1  0]]</code></pre>
</div>
<div id="split" class="section level4">
<h4>Split</h4>
<pre class="python"><code>import numpy as np

x = np.arange(8).reshape((2, 4))

x_split1, x_split2 = np.split(x, indices_or_sections=2, axis=0) # ! 均分
print(&#39;x_split1 = &#39;, x_split1)</code></pre>
<pre><code>## x_split1 =  [[0 1 2 3]]</code></pre>
<pre class="python"><code>print(&#39;x_split2 = &#39;, x_split2)</code></pre>
<pre><code>## x_split2 =  [[4 5 6 7]]</code></pre>
<pre class="python"><code>x_array_split = np.array_split(x, indices_or_sections=2, axis=1) # ! 可以不均分
print(&#39;x_array_split = &#39;, x_array_split)</code></pre>
<pre><code>## x_array_split =  [array([[0, 1],
##        [4, 5]]), array([[2, 3],
##        [6, 7]])]</code></pre>
<pre class="python"><code>x_hsplit = np.hsplit(x, indices_or_sections=2) # ! hsplit
print(&#39;x_hsplit = &#39;, x_hsplit)</code></pre>
<pre><code>## x_hsplit =  [array([[0, 1],
##        [4, 5]]), array([[2, 3],
##        [6, 7]])]</code></pre>
<pre class="python"><code>x_vsplit = np.vsplit(x, indices_or_sections=2) # ! vsplit
print(&#39;x_hsplit = &#39;, x_vsplit)</code></pre>
<pre><code>## x_hsplit =  [array([[0, 1, 2, 3]]), array([[4, 5, 6, 7]])]</code></pre>
</div>
<div id="tilling-array" class="section level4">
<h4>Tilling array</h4>
<pre class="python"><code>import numpy as np

x = np.arange(6).reshape((3, 2))

x_tile = np.tile(A=x, reps=(2, 1))  # ! 复制整个数组, y轴三次，x轴二次
print(&#39;x_tile = &#39;, x_tile)</code></pre>
<pre><code>## x_tile =  [[0 1]
##  [2 3]
##  [4 5]
##  [0 1]
##  [2 3]
##  [4 5]]</code></pre>
<pre class="python"><code>x_repeat1 = np.repeat(x, repeats=2)  # ! 复制元素，如果不指定 axis，就将数组先拉平，再复制
print(&#39;x_repeat1 = &#39;, x_repeat1)</code></pre>
<pre><code>## x_repeat1 =  [0 0 1 1 2 2 3 3 4 4 5 5]</code></pre>
<pre class="python"><code>x_repeat2 = np.repeat(x, repeats=[2, 1], axis=1)  # 水平方向：第一列 2 次，第二列 3 次
print(&#39;x_repeat2 = &#39;, x_repeat2)</code></pre>
<pre><code>## x_repeat2 =  [[0 0 1]
##  [2 2 3]
##  [4 4 5]]</code></pre>
<pre class="python"><code>x_repeat3 = np.repeat(x, repeats=[2, 1, 4], axis=0)  # 水平方向：第一列 2 次，第二列 3 次
print(&#39;x_repeat3 = &#39;, x_repeat3)</code></pre>
<pre><code>## x_repeat3 =  [[0 1]
##  [0 1]
##  [2 3]
##  [4 5]
##  [4 5]
##  [4 5]
##  [4 5]]</code></pre>
</div>
<div id="transpose-like-operations" class="section level4">
<h4>Transpose-like operations</h4>
<pre class="python"><code>import numpy as np

x = np.arange(210).reshape((2, 3, 5, 7))
x_moveaxis = np.moveaxis(a=x, source=0,
                         destination=2)  # 将一个数组的轴移动到新的位置。其他轴保持原来的顺序。
print(&#39;x_moveaxis.shape = &#39;, x_moveaxis.shape)</code></pre>
<pre><code>## x_moveaxis.shape =  (3, 5, 2, 7)</code></pre>
<pre class="python"><code>x_rollaxis = np.rollaxis(a=x, axis=2, start=1)  # 函数向后滚动特定的轴到一个特定位置
print(&#39;x_rollaxis.shape = &#39;, x_rollaxis.shape)</code></pre>
<pre><code>## x_rollaxis.shape =  (2, 5, 3, 7)</code></pre>
<pre class="python"><code>x_swapaxis = np.swapaxes(x, axis1=0, axis2=2)  # 交换两个维度
print(&#39;x_swapaxis.shape = &#39;, x_swapaxis.shape)</code></pre>
<pre><code>## x_swapaxis.shape =  (5, 3, 2, 7)</code></pre>
<pre class="python"><code>x_transpose = np.transpose(a=x, axes=(1, 0, 2, 3))  # 重新排序
print(&#39;x_transpose.shape = &#39;, x_transpose.shape)</code></pre>
<pre><code>## x_transpose.shape =  (3, 2, 5, 7)</code></pre>
<pre class="python"><code>x1 = np.arange(15).reshape((3, 5))
x1_transpose = np.transpose(x1)  # 当数组是二维的时候可以省略 axes
print(&#39;x1_transpose.shape = &#39;, x1_transpose.shape)</code></pre>
<pre><code>## x1_transpose.shape =  (5, 3)</code></pre>
</div>
</div>
<div id="functional-programming" class="section level3">
<h3>Functional programming</h3>
<pre class="python"><code>import numpy as np

def func1(x): # ! apply along axis
    return (x[0] + x[1]) * 1

x = np.arange(15).reshape((3, 5))
x_apply_along_axis = np.apply_along_axis(func1d=func1, axis=0, arr=x)
print(&#39;x_apply_along_axis = &#39;, x_apply_along_axis)</code></pre>
<pre><code>## x_apply_along_axis =  [ 5  7  9 11 13]</code></pre>
<pre class="python"><code>def func2(a, b):
    if a &gt; b:
        return False
    else:
        return True

vfunc = np.vectorize(pyfunc=func2)
x_vfunc = vfunc(x, 3)  # 逐个元素比较
print(&#39;x_vfunc = &#39;, x_vfunc)</code></pre>
<pre><code>## x_vfunc =  [[ True  True  True  True False]
##  [False False False False False]
##  [False False False False False]]</code></pre>
<pre class="python"><code>def func3(x): 
    return x + 1, x - 1

x = np.arange(6).reshape((2, 3))
# 将计算单个值的函数转换为能对数组的每个元素进行计算的 ufunc 函数; 可以返回多个值
x_frompyfunc = np.frompyfunc(func3, nin=1,
                             nout=2)  # nin:input 个数；nou:output 个数
x_result = x_frompyfunc(x)
print(&#39;x_result = &#39;, x_result)</code></pre>
<pre><code>## x_result =  (array([[1, 2, 3],
##        [4, 5, 6]], dtype=object), array([[-1, 0, 1],
##        [2, 3, 4]], dtype=object))</code></pre>
<pre class="python"><code>x = np.arange(15).reshape((3, 5))
x_piecewise = np.piecewise(x=x, condlist=[x &lt; 2, x &gt; 10], funclist=[-1, 15])
print(&#39;x_piecewise = &#39;, x_piecewise)</code></pre>
<pre><code>## x_piecewise =  [[-1 -1  0  0  0]
##  [ 0  0  0  0  0]
##  [ 0 15 15 15 15]]</code></pre>
</div>
<div id="linear-algebra" class="section level3">
<h3>Linear algebra</h3>
<pre class="python"><code>import numpy as np

x = np.array([[1, 2], [3, 4]])

x_det = np.linalg.det(x)
print(&#39;x_det = &#39;, x_det)</code></pre>
<pre><code>## x_det =  -2.0000000000000004</code></pre>
<pre class="python"><code>x_eig_values, x_eig_vectors = np.linalg.eig(x) # ! 特征值和特征向量
print(&#39;x_eig_values =&#39;, x_eig_values)</code></pre>
<pre><code>## x_eig_values = [-0.37228132  5.37228132]</code></pre>
<pre class="python"><code>print(&#39;x_eig_vectors = &#39;, x_eig_vectors)</code></pre>
<pre><code>## x_eig_vectors =  [[-0.82456484 -0.41597356]
##  [ 0.56576746 -0.90937671]]</code></pre>
<pre class="python"><code>x_eigvals = np.linalg.eigvals(x) # ! 特征值
print(&#39;x_eigvals =&#39;, x_eigvals)</code></pre>
<pre><code>## x_eigvals = [-0.37228132  5.37228132]</code></pre>
<pre class="python"><code>x_inv = np.linalg.inv(x) # ! 逆矩阵
print(&#39;x_inv = &#39;, x_inv)</code></pre>
<pre><code>## x_inv =  [[-2.   1. ]
##  [ 1.5 -0.5]]</code></pre>
<pre class="python"><code>x_norm = np.linalg.norm(x, ord=2, axis=1, keepdims=True) # ! 范数
print(&#39;x_norm = &#39;, x_norm)</code></pre>
<pre><code>## x_norm =  [[2.23606798]
##  [5.        ]]</code></pre>
<pre class="python"><code>x_pinv = np.linalg.pinv(x) # ! 伪逆
print(&#39;x_pinv = &#39;, x_pinv)</code></pre>
<pre><code>## x_pinv =  [[-2.   1. ]
##  [ 1.5 -0.5]]</code></pre>
<pre class="python"><code>y = np.array([1, 2]) # ! 求解线性方程
x_solve = np.linalg.solve(x, y)
print(&#39;x_solve = &#39;, x_solve)</code></pre>
<pre><code>## x_solve =  [0.  0.5]</code></pre>
</div>
<div id="logic-function" class="section level3">
<h3>Logic function</h3>
<pre class="python"><code>import numpy as np

x = np.arange(15).reshape((3, 5))

x_all = np.all(a=x, axis=1, keepdims=False)
print(&#39;x_all = &#39;, x_all)</code></pre>
<pre><code>## x_all =  [False  True  True]</code></pre>
<pre class="python"><code>x_any = np.any(a=x &gt; 2, axis=1)
print(&#39;x_any = &#39;, x_any)</code></pre>
<pre><code>## x_any =  [ True  True  True]</code></pre>
<pre class="python"><code>x_isfinite = np.isfinite(x) # ! 是否是有限数字
print(&#39;x_isfinite = &#39;, x_isfinite)</code></pre>
<pre><code>## x_isfinite =  [[ True  True  True  True  True]
##  [ True  True  True  True  True]
##  [ True  True  True  True  True]]</code></pre>
<pre class="python"><code>x_isinf = np.isinf(x) # ! 是否是无限数字
print(&#39;x_isinf = &#39;, x_isinf)</code></pre>
<pre><code>## x_isinf =  [[False False False False False]
##  [False False False False False]
##  [False False False False False]]</code></pre>
<pre class="python"><code>x_neginf = np.isneginf(x)
print(&#39;x_neginf = &#39;, x_neginf)</code></pre>
<pre><code>## x_neginf =  [[False False False False False]
##  [False False False False False]
##  [False False False False False]]</code></pre>
<pre class="python"><code>x_posinf = np.isposinf(x)
print(&#39;x_posinf = &#39;, x_posinf)</code></pre>
<pre><code>## x_posinf =  [[False False False False False]
##  [False False False False False]
##  [False False False False False]]</code></pre>
<pre class="python"><code>x_isnan = np.isnan(x) # ! 是否是空值
print(&#39;x_isnan = &#39;, x_isnan)</code></pre>
<pre><code>## x_isnan =  [[False False False False False]
##  [False False False False False]
##  [False False False False False]]</code></pre>
</div>
<div id="random-sampling" class="section level3">
<h3>Random Sampling</h3>
<pre class="python"><code>from numpy import random

random.seed(0) # 随便写
x = random.rand(3) # ! rand: (0,1)均匀分布
print(&#39;x = &#39;, x)</code></pre>
<pre><code>## x =  [0.5488135  0.71518937 0.60276338]</code></pre>
<pre class="python"><code>y = random.rand(2, 3)
print(&#39;y = &#39;, y)</code></pre>
<pre><code>## y =  [[0.54488318 0.4236548  0.64589411]
##  [0.43758721 0.891773   0.96366276]]</code></pre>
<pre class="python"><code>z = random.randn(2, 3) # ! randn: rand + normorlization 标准正态分布
print(&#39;z = &#39;, z)</code></pre>
<pre><code>## z =  [[ 1.26611853 -0.50587654  2.54520078]
##  [ 1.08081191  0.48431215  0.57914048]]</code></pre>
<pre class="python"><code>x = random.randint(low=10, high=100, size=(3, 5)) # ! randint: 整数
print(&#39;x = &#39;, x)</code></pre>
<pre><code>## x =  [[57 74 92 98 59]
##  [39 29 29 24 49]
##  [42 75 19 67 42]]</code></pre>
</div>
<div id="sorting-searching-and-counting" class="section level3">
<h3>Sorting searching and counting</h3>
<pre class="python"><code>import numpy as np

np.random.seed(0)
x = np.random.randint(low=1, high=100, size=(4, 5))
x_sort = np.sort(x, axis=0)  # copy
print(&#39;x_sort = &#39;, x_sort)</code></pre>
<pre><code>## x_sort =  [[10 40 22 13 59]
##  [45 48 65 37 68]
##  [66 84 88 47 88]
##  [71 89 89 68 89]]</code></pre>
<pre class="python"><code>x_argsort = np.argsort(x, axis=0) # ! argsort
print(&#39;x_argsort = &#39;, x_argsort)</code></pre>
<pre><code>## x_argsort =  [[1 3 1 2 2]
##  [0 0 0 1 0]
##  [3 1 3 3 1]
##  [2 2 2 0 3]]</code></pre>
<pre class="python"><code>x_partition = np.partition(x, kth=2, axis=0) 
print(&#39;x_partition = &#39;, x_partition)</code></pre>
<pre><code>## x_partition =  [[10 40 22 13 59]
##  [45 48 65 37 68]
##  [66 84 88 47 88]
##  [71 89 89 68 89]]</code></pre>
<pre class="python"><code>x_argpartition = np.argpartition(x, kth=2, axis=0)
print(&#39;x_argpartition = &#39;, x_argpartition)</code></pre>
<pre><code>## x_argpartition =  [[1 3 1 2 2]
##  [0 0 0 1 0]
##  [3 1 3 3 1]
##  [2 2 2 0 3]]</code></pre>
<pre class="python"><code>np.random.seed(0)
x = np.random.randint(low=1, high=100, size=(2, 3))

x_argmax = np.argmax(x, axis=0) # ! argmax
print(&#39;x_argmax = &#39;, x_argmax)</code></pre>
<pre><code>## x_argmax =  [1 1 0]</code></pre>
<pre class="python"><code>x_nanargmax = np.nanargmax(x, axis=0) # ! nanargmax
print(&#39;x_nanargmax = &#39;, x_nanargmax)</code></pre>
<pre><code>## x_nanargmax =  [1 1 0]</code></pre>
<pre class="python"><code>x_argwhere = np.argwhere(x) # ! argwhere: return indices of nonzero, group by elements
print(&#39;x_argwhere = &#39;, x_argwhere)</code></pre>
<pre><code>## x_argwhere =  [[0 0]
##  [0 1]
##  [0 2]
##  [1 0]
##  [1 1]
##  [1 2]]</code></pre>
<pre class="python"><code>x_nonzero = np.nonzero(x) # ! nonzero，注意和 argwhere 的区别
print(&#39;x_nonzero = &#39;, x_nonzero)</code></pre>
<pre><code>## x_nonzero =  (array([0, 0, 0, 1, 1, 1]), array([0, 1, 2, 0, 1, 2]))</code></pre>
<pre class="python"><code>x_where = np.where(x &gt; 30, 0, x) # ! where
print(&#39;x_where = &#39;, x_where)</code></pre>
<pre><code>## x_where =  [[ 0  0  0]
##  [ 0  0 10]]</code></pre>
<pre class="python"><code>x = np.array([1, 4, 5, 6, 8, 9]) # ! searchsorted: 数组必须是已经排序好的
x_searchsorted = np.searchsorted(a=x, v=4, side=&#39;left&#39;)
print(&#39;x_searchsorted = &#39;, x_searchsorted)</code></pre>
<pre><code>## x_searchsorted =  1</code></pre>
<pre class="python"><code>x = np.arange(12).reshape((3, 4)) # ! extract, where 也能将其过滤出来，但是无法抽取
cond = np.mod(x, 3) == 0  # 返回的是 True, False 数组
x_extraction = np.extract(condition=cond, arr=x)
print(&#39;x_extraction = &#39;, x_extraction)</code></pre>
<pre><code>## x_extraction =  [0 3 6 9]</code></pre>
<pre class="python"><code>x = np.array([[0,1,2],[4,3,0]])
x_count_nonzero = np.count_nonzero(x,axis=0)
print(&#39;x_count_nonzero = &#39;, x_count_nonzero)</code></pre>
<pre><code>## x_count_nonzero =  [1 2 1]</code></pre>
</div>
<div id="statistics" class="section level3">
<h3>Statistics</h3>
<pre class="python"><code>import numpy as np

x = np.arange(15).reshape((3, 5))

x_amin1 = np.amin(x)
print(&#39;x_amin1 = &#39;, x_amin1)</code></pre>
<pre><code>## x_amin1 =  0</code></pre>
<pre class="python"><code>x_amin2 = np.amin(x, axis=1)
print(&#39;x_amin2 = &#39;, x_amin2)</code></pre>
<pre><code>## x_amin2 =  [ 0  5 10]</code></pre>
<pre class="python"><code>x_amax = np.amax(x, axis=1)
print(&#39;x_amax = &#39;, x_amax)</code></pre>
<pre><code>## x_amax =  [ 4  9 14]</code></pre>
<pre class="python"><code>x_nanmin = np.nanmin(x, axis=1) # ! 无视空值
print(&#39;x_nanmin = &#39;, x_nanmin)</code></pre>
<pre><code>## x_nanmin =  [ 0  5 10]</code></pre>
<pre class="python"><code>x_nanmax = np.nanmax(x, axis=1)
print(&#39;x_nanmax = &#39;, x_nanmax)</code></pre>
<pre><code>## x_nanmax =  [ 4  9 14]</code></pre>
<pre class="python"><code>x_ptp = np.ptp(x, axis=0) # ! ptp
print(&#39;x_ptp = &#39;, x_ptp)</code></pre>
<pre><code>## x_ptp =  [10 10 10 10 10]</code></pre>
<pre class="python"><code>x = np.array([[10, 7, 4], [3, 2, 1]]) # ! percentile
x_percentile = np.percentile(x, 50, axis=0)
print(&#39;x_percentile = &#39;, x_percentile)</code></pre>
<pre><code>## x_percentile =  [6.5 4.5 2.5]</code></pre>
<pre class="python"><code>x = np.array([[10, 7, 4], [3, 2, 1]]) # ! quantile
x_quantile = np.quantile(x, 0.5, axis=0)
print(&#39;x_quantile = &#39;, x_quantile)
</code></pre>
<pre><code>## x_quantile =  [6.5 4.5 2.5]</code></pre>
<pre class="python"><code>x = np.arange(15).reshape((3, 5))
x_median = np.median(x, axis=0)
print(&#39;x_median = &#39;, x_median)</code></pre>
<pre><code>## x_median =  [5. 6. 7. 8. 9.]</code></pre>
<pre class="python"><code>x_average = np.average(x, axis=0)
print(&#39;x_average = &#39;, x_average)</code></pre>
<pre><code>## x_average =  [5. 6. 7. 8. 9.]</code></pre>
<pre class="python"><code>x_mean = np.mean(x, axis=0)
print(&#39;x_mean = &#39;, x_mean)</code></pre>
<pre><code>## x_mean =  [5. 6. 7. 8. 9.]</code></pre>
<pre class="python"><code>x_std = np.std(x, axis=0)
print(&#39;x_std = &#39;, x_std)</code></pre>
<pre><code>## x_std =  [4.0824829 4.0824829 4.0824829 4.0824829 4.0824829]</code></pre>
<pre class="python"><code>x_var = np.var(x, axis=0)
print(&#39;x_var = &#39;, x_var)</code></pre>
<pre><code>## x_var =  [16.66666667 16.66666667 16.66666667 16.66666667 16.66666667]</code></pre>
<pre class="python"><code>x_nanmedian = np.nanmean(x, axis=0)
print(&#39;x_nanmedian = &#39;, x_nanmedian)</code></pre>
<pre><code>## x_nanmedian =  [5. 6. 7. 8. 9.]</code></pre>
<pre class="python"><code>x_nanmean = np.nanmean(x, axis=0)
print(&#39;x_nanmean = &#39;, x_nanmean)</code></pre>
<pre><code>## x_nanmean =  [5. 6. 7. 8. 9.]</code></pre>
<pre class="python"><code>x_nanstd = np.nanstd(x, axis=0)
print(&#39;x_nanstd = &#39;, x_nanstd)</code></pre>
<pre><code>## x_nanstd =  [4.0824829 4.0824829 4.0824829 4.0824829 4.0824829]</code></pre>
<pre class="python"><code>x_nanvar = np.nanvar(x, axis=0)
print(&#39;x_nanvar = &#39;, x_nanvar)
</code></pre>
<pre><code>## x_nanvar =  [16.66666667 16.66666667 16.66666667 16.66666667 16.66666667]</code></pre>
<pre class="python"><code>x = np.random.randint(100, size=(50, 3))
y = np.random.randint(100, size=(1, 50))
x_corrcoef1 = np.corrcoef(x=x,
                          rowvar=False) # rowvar: 每行代表一个变量
print(&#39;x_corrcoef1 = &#39;, x_corrcoef1)</code></pre>
<pre><code>## x_corrcoef1 =  [[ 1.         -0.08794535  0.21280064]
##  [-0.08794535  1.          0.15223669]
##  [ 0.21280064  0.15223669  1.        ]]</code></pre>
<pre class="python"><code>x_corrcoef2 = np.corrcoef(x=x, y=y, rowvar=False)  # 分别计算 x的特征 和 y 的相关性
print(&#39;x_corrcoef2 = &#39;, x_corrcoef2)</code></pre>
<pre><code>## x_corrcoef2 =  [[ 1.         -0.08794535  0.21280064 -0.07977221]
##  [-0.08794535  1.          0.15223669 -0.00346074]
##  [ 0.21280064  0.15223669  1.         -0.19975889]
##  [-0.07977221 -0.00346074 -0.19975889  1.        ]]</code></pre>
<pre class="python"><code>x_correlate = np.correlate([1, 2, 3], [0, 1, 0.5])
print(&#39;x_correlate = &#39;, x_correlate)</code></pre>
<pre><code>## x_correlate =  [3.5]</code></pre>
<pre class="python"><code>x = np.random.randint(100, size=(50, 3))
x_cov = np.cov(m=x, rowvar=False)
print(&#39;x_cov = &#39;, x_cov)</code></pre>
<pre><code>## x_cov =  [[ 880.54081633 -131.80408163 -154.85102041]
##  [-131.80408163  707.34040816  -10.15836735]
##  [-154.85102041  -10.15836735  830.26163265]]</code></pre>
</div>
</div>
</div>
